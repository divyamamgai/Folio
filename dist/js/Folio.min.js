!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(i){e(i,window,document,t)}):"object"==typeof module&&module.exports?module.exports=function(i,s){return s===t&&(s="undefined"!=typeof window?require("jquery"):require("jquery")(i)),e(s,window,document,t),s}:e(jQuery,window,document,t)}(function(e,t,i,s){"use strict";var a={useHTMLOptions:!0,infiniteScrolling:!1,totalPages:0,maxPages:9,activePage:1,nextClass:"",previousClass:"",onUpdate:e.noop,disableInitialOnUpdate:!1},o=0,n=function(t,i){this.id=++o,this.$element=e(t),this.properties=e.extend({},a),this.setOptions(i),this.properties.useHTMLOptions&&r.applyHTMLOptions.apply(this),this.links={},this.initialize()},r={$pageCache:e('<span class="FolioPage"></span>'),$folioCache:e('<div class="Folio"><span class="FolioControl FolioPrevious"></span><span class="FolioPages"></span><span class="FolioControl FolioNext"></span></div>'),applyHTMLOptions:function(){var t=this.properties,i=this.$element,o={};for(var n in a)a.hasOwnProperty(n)&&(o[n]=i.data(n)||s);e.extend(t,o),r.sanitizeOptions.apply(this)},sanitizeOptions:function(){var i=this.properties;if(i.maxPages<5&&(i.maxPages=5),i.activePage<1&&(i.activePage=1),i.activePage>i.totalPages&&(i.activePage=i.totalPages),!e.isFunction(i.onUpdate))if("string"==typeof i.onUpdate){var s=t[i.onUpdate];i.onUpdate=e.isFunction(s)?s:e.noop}else i.onUpdate=e.noop}};n.prototype={setOptions:function(t){return this.properties=e.extend(this.properties,t),r.sanitizeOptions.apply(this),this},onUpdate:function(e){return this.setOptions({onUpdate:e})},generate:function(){var t=this.properties,i=t.totalPages,s=t.maxPages,a=this.$pages.detach(),o=r.$pageCache,n=1;if(a.html(""),i>=s)for(;n<=s;)a.append(o.clone().text(n)),n++;else for(;n<=i;)a.append(o.clone().text(n)),n++;return this.$pageArray=a.children().map(function(t,i){return e(i)}),a.insertBefore(this.$next),this},update:function(e,t){function i(e,t){o===t?c[e].text(t).removeClass("Ellipsis").addClass("Active"):c[e].text(t).removeClass("Ellipsis").removeClass("Active")}var s=this.properties,a=s.totalPages,o=s.activePage,n=s.maxPages,r=1,l=0,p=this.links,c=this.$pageArray;if(a>n){var h=n-2,d=a-h+1;if(o<h){for(r=1;r<=h;r++)i(l++,r);c[l++].html("…").addClass("Ellipsis").removeClass("Active"),i(l,a)}else if(o>=h&&o<=d){i(l++,1),c[l++].html("…").addClass("Ellipsis").removeClass("Active");var u=n-4,f=o-Math.ceil(u/2)+1,v=f+u-1;for(r=f;r<=v;r++)i(l++,r);c[l++].html("…").addClass("Ellipsis").removeClass("Active"),i(l,a)}else for(i(l++,1),c[l++].html("…").addClass("Ellipsis").removeClass("Active"),r=d;r<=a;r++)i(l++,r)}else for(r=1;r<=a;r++)i(l++,r);if(s.infiniteScrolling||1!==o?this.$previous.removeClass("Disabled"):this.$previous.addClass("Disabled"),s.infiniteScrolling||o!==a?this.$next.removeClass("Disabled"):this.$next.addClass("Disabled"),(e||!1)===!1&&s.onUpdate(o),(t||!1)===!1)for(var g in p)p.hasOwnProperty(g)&&p[g].setActivePage(o,!0,!0);return this},setActivePage:function(e,t,i){var s=this.properties;return e>=1&&e<=s.totalPages&&(s.activePage=e,this.update(t||!1,i||!1)),this},nextPage:function(){var e=this.properties;return e.activePage<e.totalPages?(e.activePage++,this.update()):e.infiniteScrolling&&(e.activePage=1,this.update()),this},previousPage:function(){var e=this.properties;return e.activePage>1?(e.activePage--,this.update()):e.infiniteScrolling&&(e.activePage=e.totalPages,this.update()),this},link:function(e,t){var i=this.properties,s=this.links;return e.properties.totalPages!==i.totalPages||s.hasOwnProperty(e.id)||(s[e.id]=e,e.properties.onUpdate=i.onUpdate,(t||!1)===!1&&(e.setActivePage(i.activePage,!0),e.link(this,!0))),this},initialize:function(){var e=this.$element,t=this.$folio=r.$folioCache.clone();return this.$previous=t.find(".FolioPrevious").addClass(this.properties.previousClass),this.$pages=t.find(".FolioPages"),this.$next=t.find(".FolioNext").addClass(this.properties.nextClass),e.empty().append(t),this.generate(),this.update(this.properties.disableInitialOnUpdate),this}},e.Folio=function(t){return e.extend(t,a)},e.fn.Folio=function(t){return this.each(function(){e.data(this,"Folio")instanceof n||e.data(this,"Folio",new n(this,t))})},e.fn.GetFolio=function(){var t;if(this.length>1){var i=[];return this.each(function(){t=e.data(this,"Folio"),t!==s&&t instanceof n&&i.push(t)}),e(i)}if(1===this.length&&(t=e.data(this[0],"Folio"),t!==s&&t instanceof n))return t},t.Folio=n,e(i).on("click",".FolioPage:not(.Ellipsis)",function(){var t=e.data(e(this).parent().parent().parent()[0],"Folio"),i=parseInt(this.innerText);t.properties.activePage!==i&&t.setActivePage(i)}).on("click",".FolioPrevious:not(.Disabled)",function(){var t=e.data(e(this).parent().parent()[0],"Folio");t.previousPage()}).on("click",".FolioNext:not(.Disabled)",function(){var t=e.data(e(this).parent().parent()[0],"Folio");t.nextPage()}),e(function(){e("[data-Folio]",i).Folio()})});
